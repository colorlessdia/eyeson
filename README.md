# EYES ON
열화상 카메라 활용 전기 설비 이상유무 판단 시스템

## 기간
2023-11-01 ~ 2023-12-01

## 참여 인원
Team. 내집마련 시그니엘 (4명)
- Front-End: 1
- Back-End: 2
- Database: 1

## 담당
Front-End
- 메인 페이지
- CCTV 페이지
- 로딩 페이지
- 상세 페이지(일부) 레이아웃

## 사용 기술 스택
### Front-End
- HTML, CSS, JS, React JS, Redux, Three JS
### Back-End
- Python, Flask, Node JS
### Database
- My SQL

## ToDo
### 공통
- UI 구성
  - 헤더
    - 왼쪽 로고, GNB, 오른쪽 페이지 사용법, Theme 버튼
    - GNB 현재 페이지 인디케이터
- 공통 적용 요소
  - radius 사용, 둥근 느낌
  - 텍스트 강약(사이즈/색상)
  - 텍스트 대비
  - 선택 영역 인터렉션
  - 다크모드
  - 반응형 웹
  - 각 페이지 사용법 모달

### 메인 페이지
- UI 구성
  - 3D 영역
    - 3D 오브젝트 렌더링
    - 3D 오브젝트 컨트롤러 추가
    - 컨트롤러 가동범위 제한
    - 층 표현 오브젝트 제작/추가
    - 조명 오브젝트 추가(다크모드 대비)
  - 평면도 영역
    - 각 층의 평면도를 캐러셀로 표현
    - 뒤쪽의 오브젝트가 보이도록 Glass Morphism기법 적용
    - 현재 평면도, 현재 층 강조
    - 평면도에 카메라 위치 표현(좌표값 기반)
    - 카메라 상태에 따른 색상
    - 카메라 아이콘 호버시 상황 툴팁제공
    - 평면도 여닫이 기능
    - 평면도 & 3D 모델 연결
  - 알림 영역
    - 정상, 경고, 위험 상태 분류
    - 경고, 위험 발생시 알림 애니메이션

### CCTV 페이지
- UI 구성
  - 정보 영역
    - 전체 카메라 IR/HD 토글 버튼
    - 현재 시간
    - 건물 위치의 기상 상태
  - CCTV 영역
    - 개별 카메라 IR/HD 토글 버튼
    - 카메라 감시 설비의 상태에 따른 border-color
    - 카메라 감시 설비 위치 및 설비명 표기
    - 개별 카메라 클릭시 해당 카메라 상세정보 페이지 이동 링크

### 로딩 페이지
- UI 구성
  - 로고 아이콘, 슬로건
    - 로고 아이콘 제작(기초도형 조합)
    - SVG 도형 및 keyframe 사용 애니메이션

### 상세 페이지(일부)
- UI 구성
  - 레이아웃

## 회고
열화상 카메라 라는 외부장치의 데이터를 활용하여 웹 애플리케이션을 구축한 프로젝트이다.

본 프로젝트는 기업 연계 프로젝트로, 기업의 아이덴티티가 녹아있는 기술을 활용한 주제들이 주어지고, 
팀마다 1개 이상의 주제에 기획서를 작성하여 제출할 수 있으며, 다수의 팀이 선택한 주제는 해당 기업 측에서 기획서를 검토 후 팀을 선택하는 방식이었다.

"열화상 카메라 활용 전기 설비 이상 유무 판단 시스템"이라는 주제의 첫 느낌은,
소속된 JS 특화 반보다는 사물 쪽을 다루는 반에 가깝게 느껴졌었다. 팀원들과 주제에 동봉된 요구사항에 대해 분석하던 중, 예상외로 결과물 예시에 웹이 명시되어 있었다. 
이 말은 곧, 웹으로도 이 프로젝트에 도전할 수 있다는 말이었지만, 다소 생소했던 주제여서 잠깐의 고민이 필요했지만, 나를 비롯한 모든 팀원들이 도전적인 주제에 대해 흥미를 보였고, 귀중한 경험이 될 것이라 생각하여 해당 주제를 지원하게 되었다.
주제를 할당받기 위해 프로젝트 구성방식, 사용기술등에 대한 기획서를 팀원들과 자료조사, 비교 등의 과정을 거치며 꼼꼼히 준비하였고, 이러한 노력은 우리팀이 해당 프로젝트를 도전할 수 있는 기회를 안겨다 주었다.

이 프로젝트의 간략한 프로세스는 다음과 같다

1. 열화상 카메라와 웹 애플리케이션 간의 통신
2. 열화상 카메라가 설비를 감시
3. 감시 중인 설비의 객체를 탐지하여 온도를 측정
4. 이상 상황 발생 시 웹/SMS 알림

카메라와의 통신은 RTSP라는 프로토콜을 통해 카메라가 전송하는 주소를 사용하여 비교적 간단히 연결할 수 있었다. 
그러나 예상 구현 결과물이 일반적인 CCTV가 나열된 모니터링 페이지의 모습을 벗어나지 못하고 있었지만, 마침 예전에 웹의 3D 요소 구현 방법에 대해 약간의 이론 공부를 해둔 Three JS가 떠올랐고, 
설비들이 모여있는 건물을 3D 모델로 제공하여 시각적인 요소를 추가하고자 하였다. 또한 실용적인 부분도 챙기고자 건물의 평면도를 Swiper 캐러셀을 사용하여 제공하고, 평면도에 카메라 위치를 아이콘으로 표시하여 이상 상황에 대해 조치할 수 있도록 고려하였다.

적절한 3D 오브젝트를 렌더링 하는 것은 학습해둔 지식이 있어서 크게 오래 걸리지는 않았으나, 각 층의 평면도를 담은 캐러셀이 이동할 때, 3D 오브젝트의 층 부분을 가리키도록 만들고 싶었으나,
이 부분은 3D 오브젝트 설계 시 포토샵의 레이어처럼 각층을 분할한 구조가 아니라면 특정 부분을 가져오는 것은 불가능한 구조였다.

방법을 고심하던 중, 튜토리얼에서 간단한 예시를 통해 학습을 하는 과정이 있듯, Three JS도 단순 기초 도형을 렌더링 하여 연습하는 과정이 있었고,
정 방법이 없다면 "기초 도형의 조합으로 건물을 본뜬 오브젝트를 내가 만들어서 층수만큼 분할하면 되지 않을까?"라는 생각을 하게 되었고, 실행에 옮겨 평면도의 층에 맞는 건물 부분을 표현할 수 있게 되었다.

팀원들도 각자의 분야에서 크고 작은 고충들이 많았다. 객체 탐지 모델인 Yolo의 버전 선택이나 어떤 데이터를 선별하여 학습해야 탐지가 잘 될지, 탐지된 데이터를 어떻게 다룰 것 인지 등, 
서로가 처한 문제들에 대해 공유하고, 아이디어를 주고받으며 해결 방법들을 찾아 나가는 과정이 참 귀중한 경험이었다고 생각한다.

튜토리얼의 기초 도형을 활용하여 내 담당 분야에 화룡점정을 할 수 있었듯,
작아 보이는 경험도, 경험을 토대로 실현한 결과가 작지 않을 수도 있음을 깨닫게 되었다. 내가 겪은 문제 해결에 대한 고민과 과정은, 이후 겪을 문제에 대해서도 빛을 발휘할 순간이 있을 거라 생각한다.
